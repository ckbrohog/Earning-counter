<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>WageWatcher – Real-Time Earnings</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      margin-top: 30px;
    }

    nav {
      background-color: #2e8b57;
      padding: 10px;
    }

    nav a {
      color: white;
      text-decoration: none;
      margin: 0 15px;
      font-weight: bold;
    }

    nav a.active {
      text-decoration: underline;
    }

    h1 {
      color: #2e8b57;
    }

    .earnings-box {
      display: flex;
      justify-content: center;
      gap: 50px;
      margin-top: 20px;
      flex-wrap: wrap;
    }

    .box {
      padding: 20px;
      border: 2px solid #ccc;
      border-radius: 10px;
      width: 220px;
    }

    .label {
      font-weight: bold;
      margin-bottom: 10px;
      display: block;
    }

    .amount {
      font-size: 1.6em;
    }

    #quote {
      font-style: italic;
      margin-top: 20px;
      color: #555;
      max-width: 500px;
      margin: 20px auto;
    }

    select {
      padding: 10px;
      font-size: 16px;
      margin-top: 20px;
    }

    #deliverySection {
      margin-top: 60px;
    }

    #deliveryControls {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 20px;
      margin-top: 10px;
    }

    .mainButton, .adjustButton {
      font-size: 22px;
      padding: 12px 25px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    .mainButton {
      background-color: #2e8b57;
      color: white;
    }

    .mainButton:hover {
      background-color: #256b45;
    }

    .adjustButton {
      background-color: #cccccc;
      color: black;
    }

    .adjustButton:hover {
      background-color: #bbbbbb;
    }

    #deliveryCount {
      font-size: 1.8em;
      color: #333;
    }
  </style>
</head>
<body>
  <nav>
    <a href="index.html" class="active">Home</a>
    <a href="log.html">Log</a>
    <a href="about.html">About Us</a>
  </nav>

  <h1>WageWatcher – Real-Time Earnings Counter</h1>
  <p>Select a weekday to see earnings (7:30 AM – 4:00 PM at $17/hour):</p>

  <select id="daySelector">
    <option value="1">Monday</option>
    <option value="2">Tuesday</option>
    <option value="3">Wednesday</option>
    <option value="4">Thursday</option>
    <option value="5">Friday</option>
  </select>

  <div class="earnings-box">
    <div class="box">
      <span class="label">Gross Earnings:</span>
      <span class="amount">$<span id="earnings">0.00</span></span>
    </div>
    <div class="box">
      <span class="label">After 10.51% Tax:</span>
      <span class="amount">$<span id="earningsAfterTax">0.00</span></span>
    </div>
  </div>

  <p id="quote">"Stay positive. Work hard. Make it happen."</p>

  <div id="deliverySection">
    <h2>
      Deliveries Today: <span id="deliveryCount">0</span>
    </h2>
    <div id="deliveryControls">
      <button class="adjustButton" id="subtractDelivery">−</button>
      <button class="mainButton" id="deliveryButton">+ Add Delivery</button>
      <button class="adjustButton" id="addDelivery">+</button>
    </div>
  </div>

  <script>
    const hourlyRate = 17;
    const taxRate = 0.1051;
    const earningsEl = document.getElementById('earnings');
    const earningsAfterTaxEl = document.getElementById('earningsAfterTax');
    const daySelector = document.getElementById('daySelector');
    const quoteEl = document.getElementById('quote');

    const quotes = {
      1: "“Success is the sum of small efforts repeated day in and day out.” – Robert Collier",
      2: "“Don’t watch the clock; do what it does. Keep going.” – Sam Levenson",
      3: "“The secret of getting ahead is getting started.” – Mark Twain",
      4: "“Push yourself, because no one else is going to do it for you.”",
      5: "“Make each day your masterpiece.” – John Wooden"
    };

    function updateQuote(day) {
      quoteEl.textContent = quotes[day] || "Have a great day!";
    }

    function updateEarnings() {
      const now = new Date();
      const selectedDay = parseInt(daySelector.value);
      const todayDay = now.getDay();

      const selectedDate = new Date(now.getFullYear(), now.getMonth(), now.getDate());
      const startTime = new Date(selectedDate);
      startTime.setHours(7, 30, 0, 0);
      const endTime = new Date(selectedDate);
      endTime.setHours(16, 0, 0, 0);

      let earnings = 0;

      if (selectedDay === todayDay) {
        if (now < startTime) {
          earnings = 0;
        } else if (now > endTime) {
          earnings = (endTime - startTime) / (1000 * 60 * 60) * hourlyRate;
        } else {
          const hoursWorked = (now - startTime) / (1000 * 60 * 60);
          earnings = hoursWorked * hourlyRate;
        }
      } else {
        earnings = (endTime - startTime) / (1000 * 60 * 60) * hourlyRate;
      }

      const earningsAfterTax = earnings * (1 - taxRate);
      earningsEl.textContent = earnings.toFixed(2);
      earningsAfterTaxEl.textContent = earningsAfterTax.toFixed(2);
    }

    // Set default to today if it's a weekday
    const currentDay = new Date().getDay();
    if (currentDay >= 1 && currentDay <= 5) {
      daySelector.value = currentDay;
      updateQuote(currentDay);
    } else {
      daySelector.value = "1"; // Default to Monday
      updateQuote(1);
    }

    setInterval(updateEarnings, 1000);
    updateEarnings();

    daySelector.addEventListener('change', () => {
      updateQuote(daySelector.value);
      updateEarnings();
    });

    // --- DELIVERY COUNTER SECTION ---
    const deliveryCountEl = document.getElementById('deliveryCount');
    const deliveryButton = document.getElementById('deliveryButton');
    const addDelivery = document.getElementById('addDelivery');
    const subtractDelivery = document.getElementById('subtractDelivery');

    const deliveryStorageKey = "deliveryCount";
    const deliveryDateKey = "deliveryDate";

    function getTodayDateStr() {
      const now = new Date();
      return now.toISOString().split('T')[0];
    }

    function loadDeliveryCount() {
      const today = getTodayDateStr();
      const savedDate = localStorage.getItem(deliveryDateKey);
      if (savedDate !== today) {
        localStorage.setItem(deliveryDateKey, today);
        localStorage.setItem(deliveryStorageKey, "0");
      }
      return parseInt(localStorage.getItem(deliveryStorageKey) || "0");
    }

    function saveDeliveryCount(count) {
      localStorage.setItem(deliveryDateKey, getTodayDateStr());
      localStorage.setItem(deliveryStorageKey, count.toString());
    }

    function updateDeliveryCountDisplay() {
      deliveryCountEl.textContent = loadDeliveryCount();
    }

    function adjustDeliveries(delta) {
      let count = loadDeliveryCount();
      count = Math.max(0, count + delta); // prevent negative numbers
      saveDeliveryCount(count);
      updateDeliveryCountDisplay();
    }

    deliveryButton.addEventListener('click', () => adjustDeliveries(1));
    addDelivery.addEventListener('click', () => adjustDeliveries(1));
    subtractDelivery.addEventListener('click', () => adjustDeliveries(-1));

    updateDeliveryCountDisplay();

    // Save daily log of deliveries when count changes
    function saveDailyLog() {
      const today = getTodayDateStr();
      let log = JSON.parse(localStorage.getItem('dailyLog') || "{}");
      log[today] = log[today] || {};
      log[today].deliveries = loadDeliveryCount();
      localStorage.setItem('dailyLog', JSON.stringify(log));
    }

    // Hook delivery adjustments to save log
    const origAdjustDeliveries = adjustDeliveries;
    adjustDeliveries = function(delta) {
      origAdjustDeliveries(delta);
      saveDailyLog();
    }

    // Save log when page unloads (in case user closes without changing deliveries)
    window.addEventListener('beforeunload', saveDailyLog);

  </script>
</body>
</html>
